{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.regexp.search.js","webpack:///./src/views/claimfunds.vue?8950","webpack:///src/views/claimfunds.vue","webpack:///./src/views/claimfunds.vue?a0fe","webpack:///./src/views/claimfunds.vue"],"names":["__webpack_require__","defined","SEARCH","$search","regexp","O","this","fn","undefined","call","RegExp","String","render","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","_s","info","directives","name","rawName","value","expression","attrs","type","disabled","domProps","on","input","$event","target","composing","receiver","details","required","disable_fields","change","$$selectedVal","Array","prototype","filter","options","o","selected","map","val","_value","$set","multiple","_l","bank","index","key","code","placeholder","click","claimFunds","class","btnClasses","staticRenderFns","claimfundsvue_type_script_lang_js_","created","getTransactionDetails","getBanks","data","account_bank","account_number","amount","banks","message","transaction","initiating","methods","_this","Object","transfers","then","response","status","catch","err","_this2","qs","params","window","location","search","substring","split","i","length","decodeURIComponent","txref","currency","concat","_this3","_this$transaction","_id","payload","objectSpread","parseInt","meta","transaction_id","narration","setTimeout","console","log","computed","button","is-primary","is-fullwidth","is-loading","views_claimfundsvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-8cc9.fc9dd6e1.js","sourcesContent":["// @@search logic\nrequire('./_fix-re-wks')('search', 1, function (defined, SEARCH, $search) {\n  // 21.1.3.15 String.prototype.search(regexp)\n  return [function search(regexp) {\n    'use strict';\n    var O = defined(this);\n    var fn = regexp == undefined ? undefined : regexp[SEARCH];\n    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));\n  }, $search];\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal is-active\"},[_c('div',{staticClass:\"modal-background\"}),_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-content claim-funds-modal-card\"},[_vm._m(0),_c('div',{staticClass:\"has-text-centered\"},[_vm._v(\"\\n        \"+_vm._s(_vm.info)+\"\\n      \")]),_c('div',{staticClass:\"card-details\"},[_c('div',{staticClass:\"field\"},[_c('label',{staticClass:\"card-label\"},[_vm._v(\"Name\")]),_c('p',{staticClass:\"control\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.receiver),expression:\"receiver\"}],staticClass:\"input\",attrs:{\"type\":\"text\",\"disabled\":\"\"},domProps:{\"value\":(_vm.receiver)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.receiver=$event.target.value}}})])]),_c('div',{staticClass:\"field\"},[_c('label',{staticClass:\"card-label\"},[_vm._v(\"BANK\")]),_c('div',{staticClass:\"control\"},[_c('div',{staticClass:\"select is-fullwidth\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.details.account_bank),expression:\"details.account_bank\"}],attrs:{\"required\":\"\",\"disabled\":_vm.disable_fields},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.details, \"account_bank\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"undefined\"}},[_vm._v(\"Select bank\")]),_vm._l((_vm.banks),function(bank,index){return _c('option',{key:index,domProps:{\"value\":bank.code}},[_vm._v(\"  \\n                  \"+_vm._s(bank.name)+\"\\n                \")])})],2)])])]),_c('div',{staticClass:\"field\"},[_c('label',{staticClass:\"card-label\"},[_vm._v(\"ACCOUNT NUMBER\")]),_c('p',{staticClass:\"control\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.details.account_number),expression:\"details.account_number\"}],staticClass:\"input\",attrs:{\"type\":\"text\",\"placeholder\":\"0000000000\",\"disabled\":_vm.disable_fields},domProps:{\"value\":(_vm.details.account_number)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.details, \"account_number\", $event.target.value)}}})])])]),_c('footer',{staticClass:\"claim-funds-modal-footer\",on:{\"click\":_vm.claimFunds}},[_c('a',{class:_vm.btnClasses},[_vm._v(\"Continue\")])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"payment-modal-logo-text\"},[_c('span',[_vm._v(\"Transfer\")]),_c('i',[_vm._v(\" go\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"modal is-active\">\r\n  <div class=\"modal-background\"></div>\r\n  <div class=\"modal-content\">\r\n    <div class=\"modal-content claim-funds-modal-card\">\r\n      <span class=\"payment-modal-logo-text\">\r\n        <span>Transfer</span>\r\n        <i> go</i>\r\n      </span>\r\n\r\n      <div class=\"has-text-centered\">\r\n        {{info}}\r\n      </div>\r\n\r\n      <div class=\"card-details\">\r\n\r\n        <div class=\"field\">\r\n          <label class=\"card-label\">Name</label>\r\n          <p class=\"control\">\r\n            <input class=\"input\" type=\"text\" v-model=\"receiver\" disabled>\r\n          </p>\r\n        </div>\r\n\r\n        <div class=\"field\">\r\n          <label class=\"card-label\">BANK</label>\r\n          <div class=\"control\">\r\n            <div class=\"select is-fullwidth\">\r\n              <select v-model=\"details.account_bank\" required :disabled=\"disable_fields\">\r\n                <option value=\"undefined\">Select bank</option>\r\n                <option :value=\"bank.code\" v-for=\"(bank, index) in banks\" :key=\"index\">  \r\n                  {{ bank.name }}\r\n                </option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div> \r\n\r\n        <div class=\"field\">\r\n          <label class=\"card-label\">ACCOUNT NUMBER</label>\r\n          <p class=\"control\">\r\n            <input \r\n              class=\"input\" \r\n              type=\"text\" \r\n              placeholder=\"0000000000\" \r\n              v-model=\"details.account_number\" \r\n              :disabled=\"disable_fields\">\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <footer class=\"claim-funds-modal-footer\" @click=\"claimFunds\">\r\n          <a :class=\"btnClasses\">Continue</a>\r\n      </footer>  \r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport { GET_BANKS, GET_TRANSACTION, CLAIM_FUNDS } from '../API/transfers'\r\n\r\nexport default {\r\n  name: 'claim-funds',\r\n\r\n  created() {\r\n    this.getTransactionDetails()\r\n    this.getBanks()\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      details: {\r\n        account_bank: undefined,\r\n        account_number: \"\"\r\n      },\r\n      receiver: \"\",\r\n      amount: 0.00,\r\n      banks: null,\r\n      message: \"Please wait..\",\r\n      transaction: null,\r\n      disable_fields: false,\r\n      initiating: false\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    getBanks() {\r\n      GET_BANKS().then(response => {\r\n        if(response.data.status === 'success') {\r\n          this.banks = response.data.data\r\n        }\r\n      }).catch(err => {\r\n        this.banks = []\r\n      })\r\n    },\r\n\r\n    getTransactionDetails() {\r\n      let qs = {}\r\n      let params = window.location.search.substring(1).split('&');\r\n      for (var i = params.length - 1; i >= 0; i--) {\r\n          let key = params[i].split('=')[0]\r\n          let val = params[i].split('=')[1]\r\n          qs[key] = decodeURIComponent(val)\r\n      };  \r\n\r\n      GET_TRANSACTION(qs.txref).then(response => {\r\n        if(response.status === 'success') {\r\n          this.transaction = response.data\r\n          this.receiver = response.data.receiver.name\r\n          this.amount = response.data.currency.concat(\" \"+response.data.amount)\r\n        }else {\r\n          this.message = response.message\r\n        }\r\n      }).catch(err => {\r\n          this.disable_fields = true\r\n          this.message = err.response.data.message || \"Service unavailable\"\r\n      })\r\n    },\r\n\r\n    claimFunds() {\r\n      if(this.details.account_bank !== undefined && this.details.account_number !== \"\") {\r\n        this.initiating = true\r\n        let { amount, currency, _id } = this.transaction\r\n        let payload = {\r\n          amount: parseInt(amount),\r\n          currency,\r\n          meta: [{ transaction_id: _id }],\r\n          narration: \"funds claimed by \".concat(this.receiver),\r\n          ...this.details\r\n        }\r\n\r\n        CLAIM_FUNDS(payload).then(response => {\r\n          this.initiating = false\r\n\r\n          if(response.status === 'success') {\r\n            this.disable_fields = true\r\n            this.message = response.data.message || response.message\r\n            this.amount = 0.00\r\n          }else {\r\n            this.message = response.message\r\n            this.amount = 0.00\r\n            setTimeout(() => {\r\n              this.amount = this.transaction.currency.concat(\" \"+this.transaction.amount)\r\n            }, 5000);\r\n          }\r\n        }).catch(err => {\r\n          console.log(err.response)\r\n          this.initiating = false\r\n          this.message = err.response.data.message || \"Service unavailable.\"\r\n          this.amount = 0.00\r\n          setTimeout(() => {\r\n            this.amount = this.transaction.currency.concat(\" \"+this.transaction.amount)\r\n          }, 5000);\r\n        })\r\n      }else {\r\n        this.message = \"Fill in account details\"\r\n        this.amount = 0.00\r\n        setTimeout(() => {\r\n          this.amount = this.transaction.currency.concat(\" \"+this.transaction.amount)\r\n        }, 5000);\r\n      }\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    btnClasses() {\r\n      return {\r\n        'button':true, \r\n        'is-primary': true, \r\n        'is-fullwidth': true,\r\n        'is-loading': this.initiating\r\n      }\r\n    },\r\n\r\n    info() {\r\n      if (this.amount !== 0.00) {\r\n        return this.amount\r\n      }else {\r\n        return this.message\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./claimfunds.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./claimfunds.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./claimfunds.vue?vue&type=template&id=7d2354b9&\"\nimport script from \"./claimfunds.vue?vue&type=script&lang=js&\"\nexport * from \"./claimfunds.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}