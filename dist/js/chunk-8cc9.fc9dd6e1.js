(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8cc9"],{"386d":function(t,a,e){e("214f")("search",1,function(t,a,e){return[function(e){"use strict";var n=t(this),s=void 0==e?void 0:e[a];return void 0!==s?s.call(e,n):new RegExp(e)[a](String(n))},e]})},de04:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal is-active"},[e("div",{staticClass:"modal-background"}),e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-content claim-funds-modal-card"},[t._m(0),e("div",{staticClass:"has-text-centered"},[t._v("\n        "+t._s(t.info)+"\n      ")]),e("div",{staticClass:"card-details"},[e("div",{staticClass:"field"},[e("label",{staticClass:"card-label"},[t._v("Name")]),e("p",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.receiver,expression:"receiver"}],staticClass:"input",attrs:{type:"text",disabled:""},domProps:{value:t.receiver},on:{input:function(a){a.target.composing||(t.receiver=a.target.value)}}})])]),e("div",{staticClass:"field"},[e("label",{staticClass:"card-label"},[t._v("BANK")]),e("div",{staticClass:"control"},[e("div",{staticClass:"select is-fullwidth"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.details.account_bank,expression:"details.account_bank"}],attrs:{required:"",disabled:t.disable_fields},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.details,"account_bank",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"undefined"}},[t._v("Select bank")]),t._l(t.banks,function(a,n){return e("option",{key:n,domProps:{value:a.code}},[t._v("  \n                  "+t._s(a.name)+"\n                ")])})],2)])])]),e("div",{staticClass:"field"},[e("label",{staticClass:"card-label"},[t._v("ACCOUNT NUMBER")]),e("p",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.details.account_number,expression:"details.account_number"}],staticClass:"input",attrs:{type:"text",placeholder:"0000000000",disabled:t.disable_fields},domProps:{value:t.details.account_number},on:{input:function(a){a.target.composing||t.$set(t.details,"account_number",a.target.value)}}})])])]),e("footer",{staticClass:"claim-funds-modal-footer",on:{click:t.claimFunds}},[e("a",{class:t.btnClasses},[t._v("Continue")])])])])])},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("span",{staticClass:"payment-modal-logo-text"},[e("span",[t._v("Transfer")]),e("i",[t._v(" go")])])}],i=e("c93e"),c=(e("7f7f"),e("386d"),e("28a5"),e("cadf"),e("551c"),e("42e2")),o={name:"claim-funds",created:function(){this.getTransactionDetails(),this.getBanks()},data:function(){return{details:{account_bank:void 0,account_number:""},receiver:"",amount:0,banks:null,message:"Please wait..",transaction:null,disable_fields:!1,initiating:!1}},methods:{getBanks:function(){var t=this;Object(c["b"])().then(function(a){"success"===a.data.status&&(t.banks=a.data.data)}).catch(function(a){t.banks=[]})},getTransactionDetails:function(){for(var t=this,a={},e=window.location.search.substring(1).split("&"),n=e.length-1;n>=0;n--){var s=e[n].split("=")[0],i=e[n].split("=")[1];a[s]=decodeURIComponent(i)}Object(c["c"])(a.txref).then(function(a){"success"===a.status?(t.transaction=a.data,t.receiver=a.data.receiver.name,t.amount=a.data.currency.concat(" "+a.data.amount)):t.message=a.message}).catch(function(a){t.disable_fields=!0,t.message=a.response.data.message||"Service unavailable"})},claimFunds:function(){var t=this;if(void 0!==this.details.account_bank&&""!==this.details.account_number){this.initiating=!0;var a=this.transaction,e=a.amount,n=a.currency,s=a._id,o=Object(i["a"])({amount:parseInt(e),currency:n,meta:[{transaction_id:s}],narration:"funds claimed by ".concat(this.receiver)},this.details);Object(c["a"])(o).then(function(a){t.initiating=!1,"success"===a.status?(t.disable_fields=!0,t.message=a.data.message||a.message,t.amount=0):(t.message=a.message,t.amount=0,setTimeout(function(){t.amount=t.transaction.currency.concat(" "+t.transaction.amount)},5e3))}).catch(function(a){console.log(a.response),t.initiating=!1,t.message=a.response.data.message||"Service unavailable.",t.amount=0,setTimeout(function(){t.amount=t.transaction.currency.concat(" "+t.transaction.amount)},5e3)})}else this.message="Fill in account details",this.amount=0,setTimeout(function(){t.amount=t.transaction.currency.concat(" "+t.transaction.amount)},5e3)}},computed:{btnClasses:function(){return{button:!0,"is-primary":!0,"is-fullwidth":!0,"is-loading":this.initiating}},info:function(){return 0!==this.amount?this.amount:this.message}}},l=o,r=e("2877"),u=Object(r["a"])(l,n,s,!1,null,null,null);a["default"]=u.exports}}]);
//# sourceMappingURL=chunk-8cc9.fc9dd6e1.js.map